{"ast":null,"code":"import { useEvent as $e9faafb641e167db$export$90fc3a17d93f704c } from \"./useEvent.mjs\";\nimport { useLayoutEffect as $f0a04ccd8dbdd83b$export$e5c5a5f917a5871c } from \"./useLayoutEffect.mjs\";\nimport { useRef as $hDRkU$useRef, useCallback as $hDRkU$useCallback } from \"react\";\n/*\n * Copyright 2024 Adobe. All rights reserved.\n * This file is licensed to you under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License. You may obtain a copy\n * of the License at http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software distributed under\n * the License is distributed on an \"AS IS\" BASIS, WITHOUT WARRANTIES OR REPRESENTATIONS\n * OF ANY KIND, either express or implied. See the License for the specific language\n * governing permissions and limitations under the License.\n */\n\nfunction $26f7f3da73fcd9d6$export$7717c92ee915373e(props, ref) {\n  let {\n    isLoading: isLoading,\n    onLoadMore: onLoadMore,\n    scrollOffset = 1,\n    items: items\n  } = props; // Handle scrolling, and call onLoadMore when nearing the bottom.\n\n  let isLoadingRef = (0, $hDRkU$useRef)(isLoading);\n  let prevProps = (0, $hDRkU$useRef)(props);\n  let onScroll = (0, $hDRkU$useCallback)(() => {\n    if (ref.current && !isLoadingRef.current && onLoadMore) {\n      let shouldLoadMore = ref.current.scrollHeight - ref.current.scrollTop - ref.current.clientHeight < ref.current.clientHeight * scrollOffset;\n\n      if (shouldLoadMore) {\n        isLoadingRef.current = true;\n        onLoadMore();\n      }\n    }\n  }, [onLoadMore, ref, scrollOffset]);\n  let lastItems = (0, $hDRkU$useRef)(items);\n  (0, $f0a04ccd8dbdd83b$export$e5c5a5f917a5871c)(() => {\n    // Only update isLoadingRef if props object actually changed,\n    // not if a local state change occurred.\n    if (props !== prevProps.current) {\n      isLoadingRef.current = isLoading;\n      prevProps.current = props;\n    } // TODO: Eventually this hook will move back into RAC during which we will accept the collection as a option to this hook.\n    // We will only load more if the collection has changed after the last load to prevent multiple onLoadMore from being called\n    // while the data from the last onLoadMore is being processed by RAC collection.\n\n\n    let shouldLoadMore = (ref === null || ref === void 0 ? void 0 : ref.current) && !isLoadingRef.current && onLoadMore && (!items || items !== lastItems.current) && ref.current.clientHeight === ref.current.scrollHeight;\n\n    if (shouldLoadMore) {\n      isLoadingRef.current = true;\n      onLoadMore === null || onLoadMore === void 0 ? void 0 : onLoadMore();\n    }\n\n    lastItems.current = items;\n  }, [isLoading, onLoadMore, props, ref, items]); // TODO: maybe this should still just return scroll props?\n  // Test against case where the ref isn't defined when this is called\n  // Think this was a problem when trying to attach to the scrollable body of the table in OnLoadMoreTableBodyScroll\n\n  (0, $e9faafb641e167db$export$90fc3a17d93f704c)(ref, 'scroll', onScroll);\n}\n\nexport { $26f7f3da73fcd9d6$export$7717c92ee915373e as useLoadMore };","map":{"version":3,"mappings":";;;AAAA;;;;;;;;;;;;AAkCO,SAASA,yCAAT,CAAqBC,KAArB,EAA2CC,GAA3C,EAA6E;EAClF,IAAI;IAAAC,WAACA,SAAD;IAAUC,YAAEA,UAAZ;IAAwBC,eAAe,CAAvC;IAAuCC,OAAGA;EAA1C,IAAmDL,KAAvD,CADkF,CAGlF;;EACA,IAAIM,eAAe,mBAAOJ,SAAP,CAAnB;EACA,IAAIK,YAAY,mBAAOP,KAAP,CAAhB;EACA,IAAIQ,WAAW,wBAAY;IACzB,IAAIP,IAAIQ,OAAJ,IAAe,CAACH,aAAaG,OAA7B,IAAwCN,UAA5C,EAAwD;MACtD,IAAIO,iBAAiBT,IAAIQ,OAAJ,CAAYE,YAAZ,GAA2BV,IAAIQ,OAAJ,CAAYG,SAAvC,GAAmDX,IAAIQ,OAAJ,CAAYI,YAA/D,GAA8EZ,IAAIQ,OAAJ,CAAYI,YAAZ,GAA2BT,YAA9H;;MAEA,IAAIM,cAAJ,EAAoB;QAClBJ,aAAaG,OAAb,GAAuB,IAAvB;QACAN;MACF;IACF;EACF,CATe,EASZ,CAACA,UAAD,EAAaF,GAAb,EAAkBG,YAAlB,CATY,CAAf;EAWA,IAAIU,YAAY,mBAAOT,KAAP,CAAhB;EACA,+CAAgB;IACd;IACA;IACA,IAAIL,UAAUO,UAAUE,OAAxB,EAAiC;MAC/BH,aAAaG,OAAb,GAAuBP,SAAvB;MACAK,UAAUE,OAAV,GAAoBT,KAApB;IACF,CANc,CAQd;IACA;IACA;;;IACA,IAAIU,iBAAiB,+CAAKD,OAAL,KAChB,CAACH,aAAaG,OADE,IAEhBN,UAFgB,KAGf,CAACE,KAAD,IAAUA,UAAUS,UAAUL,OAHf,KAIhBR,IAAIQ,OAAJ,CAAYI,YAAZ,KAA6BZ,IAAIQ,OAAJ,CAAYE,YAJ9C;;IAMA,IAAID,cAAJ,EAAoB;MAClBJ,aAAaG,OAAb,GAAuB,IAAvB;MACAN;IACF;;IAEAW,UAAUL,OAAV,GAAoBJ,KAApB;EACF,CAvBA,EAuBG,CAACH,SAAD,EAAYC,UAAZ,EAAwBH,KAAxB,EAA+BC,GAA/B,EAAoCI,KAApC,CAvBH,EAlBkF,CA2ClF;EACA;EACA;;EACA,+CAASJ,GAAT,EAAc,QAAd,EAAwBO,QAAxB;AACF","names":["$26f7f3da73fcd9d6$export$7717c92ee915373e","props","ref","isLoading","onLoadMore","scrollOffset","items","isLoadingRef","prevProps","onScroll","current","shouldLoadMore","scrollHeight","scrollTop","clientHeight","lastItems"],"sources":["C:\\Users\\rohan\\Downloads\\crud-app-master\\crud-app-master\\node_modules\\@react-aria\\utils\\dist\\packages\\@react-aria\\utils\\src\\useLoadMore.ts"],"sourcesContent":["/*\n * Copyright 2024 Adobe. All rights reserved.\n * This file is licensed to you under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License. You may obtain a copy\n * of the License at http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software distributed under\n * the License is distributed on an \"AS IS\" BASIS, WITHOUT WARRANTIES OR REPRESENTATIONS\n * OF ANY KIND, either express or implied. See the License for the specific language\n * governing permissions and limitations under the License.\n */\n\nimport {RefObject, useCallback, useRef} from 'react';\nimport {useEvent} from './useEvent';\n\nimport {useLayoutEffect} from './useLayoutEffect';\n\nexport interface LoadMoreProps {\n  /** Whether data is currently being loaded. */\n  isLoading?: boolean,\n  /** Handler that is called when more items should be loaded, e.g. while scrolling near the bottom.  */\n  onLoadMore?: () => void,\n  /**\n   * The amount of offset from the bottom of your scrollable region that should trigger load more.\n   * Uses a percentage value relative to the scroll body's client height. Load more is then triggered\n   * when your current scroll position's distance from the bottom of the currently loaded list of items is less than\n   * or equal to the provided value. (e.g. 1 = 100% of the scroll region's height).\n   * @default 1\n   */\n  scrollOffset?: number,\n  /** The data currently loaded. */\n  items?: any\n}\n\nexport function useLoadMore(props: LoadMoreProps, ref: RefObject<HTMLElement | null>): void {\n  let {isLoading, onLoadMore, scrollOffset = 1, items} = props;\n\n  // Handle scrolling, and call onLoadMore when nearing the bottom.\n  let isLoadingRef = useRef(isLoading);\n  let prevProps = useRef(props);\n  let onScroll = useCallback(() => {\n    if (ref.current && !isLoadingRef.current && onLoadMore) {\n      let shouldLoadMore = ref.current.scrollHeight - ref.current.scrollTop - ref.current.clientHeight < ref.current.clientHeight * scrollOffset;\n\n      if (shouldLoadMore) {\n        isLoadingRef.current = true;\n        onLoadMore();\n      }\n    }\n  }, [onLoadMore, ref, scrollOffset]);\n\n  let lastItems = useRef(items);\n  useLayoutEffect(() => {\n    // Only update isLoadingRef if props object actually changed,\n    // not if a local state change occurred.\n    if (props !== prevProps.current) {\n      isLoadingRef.current = isLoading;\n      prevProps.current = props;\n    }\n\n    // TODO: Eventually this hook will move back into RAC during which we will accept the collection as a option to this hook.\n    // We will only load more if the collection has changed after the last load to prevent multiple onLoadMore from being called\n    // while the data from the last onLoadMore is being processed by RAC collection.\n    let shouldLoadMore = ref?.current\n      && !isLoadingRef.current\n      && onLoadMore\n      && (!items || items !== lastItems.current)\n      && ref.current.clientHeight === ref.current.scrollHeight;\n\n    if (shouldLoadMore) {\n      isLoadingRef.current = true;\n      onLoadMore?.();\n    }\n\n    lastItems.current = items;\n  }, [isLoading, onLoadMore, props, ref, items]);\n\n  // TODO: maybe this should still just return scroll props?\n  // Test against case where the ref isn't defined when this is called\n  // Think this was a problem when trying to attach to the scrollable body of the table in OnLoadMoreTableBodyScroll\n  useEvent(ref, 'scroll', onScroll);\n}\n"]},"metadata":{},"sourceType":"module"}